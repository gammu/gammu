<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Developer documentation &mdash; Gammu 1.42.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css" />
      <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Miscellaneous utilities" href="../utils/index.html" />
    <link rel="prev" title="SMSD Database Structure" href="tables.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Gammu
          </a>
              <div class="version">
                1.42.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../project/index.html">Gammu project</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quick/index.html">Quick starter guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/index.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python/index.html">python-gammu</a></li>
<li class="toctree-l1"><a class="reference internal" href="../c/index.html">libGammu</a></li>
<li class="toctree-l1"><a class="reference internal" href="../internal/index.html">Gammu internals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../formats/index.html">File formats used by Gammu</a></li>
<li class="toctree-l1"><a class="reference internal" href="../config/index.html">Gammu Configuration File</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gammu/index.html">Gammu Utility</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">SMS Daemon</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="usage.html">Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="manual.html">Program Manuals</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html">SMSD Configuration File</a></li>
<li class="toctree-l2"><a class="reference internal" href="run.html">RunOnReceive Directive</a></li>
<li class="toctree-l2"><a class="reference internal" href="backends.html">Backend services</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Developer documentation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#backend-services">Backend services</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#backend-interface">Backend interface</a></li>
<li class="toctree-l4"><a class="reference internal" href="#message-id">Message ID</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#message-sending-workflow">Message Sending Workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="#message-receiving-workflow">Message Receiving Workflow</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../utils/index.html">Miscellaneous utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing/index.html">Testing Gammu</a></li>
<li class="toctree-l1"><a class="reference internal" href="../protocol/index.html">Phone Protocols</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Gammu</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">SMS Daemon</a></li>
      <li class="breadcrumb-item active">Developer documentation</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/smsd/code.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="developer-documentation">
<h1>Developer documentation<a class="headerlink" href="#developer-documentation" title="Permalink to this heading"></a></h1>
<section id="backend-services">
<h2>Backend services<a class="headerlink" href="#backend-services" title="Permalink to this heading"></a></h2>
<p>The backend service is responsible for storing received messages and giving
the SMSD core messages to send. It is solely up to them how the message will
be stored, for example currently Gammu includes backends to store messages on
filesystem (<a class="reference internal" href="files.html#gammu-smsd-files"><span class="std std-ref">Files backend</span></a>), various databases (<a class="reference internal" href="mysql.html#gammu-smsd-mysql"><span class="std std-ref">MySQL Backend</span></a>,
<a class="reference internal" href="pgsql.html#gammu-smsd-pgsql"><span class="std std-ref">PostgreSQL Backend</span></a>, <a class="reference internal" href="dbi.html#gammu-smsd-dbi"><span class="std std-ref">DBI Backend</span></a>) or backend which does not store anything
at all (<a class="reference internal" href="null.html#gammu-smsd-null"><span class="std std-ref">Null Backend</span></a>).</p>
<section id="backend-interface">
<h3>Backend interface<a class="headerlink" href="#backend-interface" title="Permalink to this heading"></a></h3>
<p>Each backend service needs to support several operations, which are exported
in <code class="docutils literal notranslate"><span class="pre">GSM_SMSDService</span></code> structure:</p>
<dl class="c function">
<dt class="sig sig-object c">
<span class="sig-name descname"><span class="pre">GSM_Error</span>&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">GSM_SMSDService::Init</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">(GSM_SMSDConfig</span> <span class="pre">*Config)</span></span></dt>
<dd><p>Initializes internal state, connect to backend storage.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Config</strong> – Pointer to SMSD configuration data</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Error code.</p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c">
<span class="sig-name descname"><span class="pre">GSM_Error</span>&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">GSM_SMSDService::Free</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">(GSM_SMSDConfig</span> <span class="pre">*Config)</span></span></dt>
<dd><p>Freeing internal data, disconnect from backend storage.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Config</strong> – Pointer to SMSD configuration data</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Error code.</p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c">
<span class="sig-name descname"><span class="pre">GSM_Error</span>&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">GSM_SMSDService::InitAfterConnect</span>&#160;&#160; <span class="pre">(GSM_SMSDConfig</span> <span class="pre">*Config)</span></span></dt>
<dd><p>Optional hook called after SMSD is connected to phone, can be used for storing information about phone in backend.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Config</strong> – Pointer to SMSD configuration data</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Error code.</p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c">
<span class="sig-name descname"><span class="pre">GSM_Error</span>&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">GSM_SMSDService::SaveInboxSMS</span>&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">(GSM_MultiSMSMessage</span> <span class="pre">*sms,</span> <span class="pre">GSM_SMSDConfig</span> <span class="pre">*Config,</span> <span class="pre">char</span> <span class="pre">**Locations)</span></span></dt>
<dd><p>Saves message into inbox.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sms</strong> – Message data to save</p></li>
<li><p><strong>Config</strong> – Pointer to SMSD configuration data</p></li>
<li><p><strong>Locations</strong> – Newly allocation pointer to string with IDs identifying saved messages.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Error code.</p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c">
<span class="sig-name descname"><span class="pre">GSM_Error</span>&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">GSM_SMSDService::FindOutboxSMS</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">(GSM_MultiSMSMessage</span> <span class="pre">*sms,</span> <span class="pre">GSM_SMSDConfig</span> <span class="pre">*Config,</span> <span class="pre">char</span> <span class="pre">*ID)</span></span></dt>
<dd><p>Finds message in outbox suitable for sending.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sms</strong> – Found outbox message will be stored here</p></li>
<li><p><strong>Config</strong> – Pointer to SMSD configuration data</p></li>
<li><p><strong>ID</strong> – Identification of found message will be stored here, this
should be unique for different message, so that repeated attempts to
send same message can be detected by SMSD core. Empty string avoids
this check.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Error code.</p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c">
<span class="sig-name descname"><span class="pre">GSM_Error</span>&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">GSM_SMSDService::MoveSMS</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">(GSM_MultiSMSMessage</span> <span class="pre">*sms,</span> <span class="pre">GSM_SMSDConfig</span> <span class="pre">*Config,</span> <span class="pre">char</span> <span class="pre">*ID,</span> <span class="pre">gboolean</span> <span class="pre">alwaysDelete,</span> <span class="pre">gboolean</span> <span class="pre">sent)</span></span></dt>
<dd><p>Moves sent message from outbox to sent items.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sms</strong> – Message which should be moved, backend usually can get it by ID as well.</p></li>
<li><p><strong>Config</strong> – Pointer to SMSD configuration data.</p></li>
<li><p><strong>ID</strong> – Identification of message to be moved.</p></li>
<li><p><strong>alwaysDelete</strong> – Whether to delete message from outbox even if moving fails.</p></li>
<li><p><strong>sent</strong> – Whether message was sent (<code class="docutils literal notranslate"><span class="pre">TRUE</span></code>) or there was a failure (<code class="docutils literal notranslate"><span class="pre">FALSE</span></code>).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Error code.</p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c">
<span class="sig-name descname"><span class="pre">GSM_Error</span>&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">GSM_SMSDService::CreateOutboxSMS</span>&#160;&#160;&#160; <span class="pre">(GSM_MultiSMSMessage</span> <span class="pre">*sms,</span> <span class="pre">GSM_SMSDConfig</span> <span class="pre">*Config,</span> <span class="pre">char</span> <span class="pre">*NewID)</span></span></dt>
<dd><p>Saves message into outbox queue.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sms</strong> – Message data to save</p></li>
<li><p><strong>Config</strong> – Pointer to SMSD configuration data</p></li>
<li><p><strong>NewID</strong> – ID of created message will be stored here.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Error code.</p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c">
<span class="sig-name descname"><span class="pre">GSM_Error</span>&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">GSM_SMSDService::AddSentSMSInfo</span>&#160;&#160;&#160;&#160; <span class="pre">(GSM_MultiSMSMessage</span> <span class="pre">*sms,</span> <span class="pre">GSM_SMSDConfig</span> <span class="pre">*Config,</span> <span class="pre">char</span> <span class="pre">*ID,</span> <span class="pre">int</span> <span class="pre">Part,</span> <span class="pre">GSM_SMSDSendingError</span> <span class="pre">err,</span> <span class="pre">int</span> <span class="pre">TPMR)</span></span></dt>
<dd><p>Logs information about sent message (eg. delivery report).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sms</strong> – Message which should be moved, backend usually can get it by ID as well.</p></li>
<li><p><strong>Config</strong> – Pointer to SMSD configuration data</p></li>
<li><p><strong>ID</strong> – Identification of message to be marked.</p></li>
<li><p><strong>Part</strong> – Part of the message which is being processed.</p></li>
<li><p><strong>err</strong> – Status of sending message.</p></li>
<li><p><strong>TPMR</strong> – Message reference if available (<a class="reference internal" href="../glossary.html#term-TPMR"><span class="xref std std-term">TPMR</span></a>).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Error code.</p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c">
<span class="sig-name descname"><span class="pre">GSM_Error</span>&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">GSM_SMSDService::RefreshSendStatus</span>&#160; <span class="pre">(GSM_SMSDConfig</span> <span class="pre">*Config,</span> <span class="pre">char</span> <span class="pre">*ID)</span></span></dt>
<dd><p>Updates sending status in service backend.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Config</strong> – Pointer to SMSD configuration data</p></li>
<li><p><strong>ID</strong> – Identification of message to be marked.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Error code.</p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c">
<span class="sig-name descname"><span class="pre">GSM_Error</span>&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">GSM_SMSDService::RefreshPhoneStatus</span> <span class="pre">(GSM_SMSDConfig</span> <span class="pre">*Config)</span></span></dt>
<dd><p>Updates information about phone in database (network status, battery, etc.).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Config</strong> – Pointer to SMSD configuration data</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Error code.</p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c">
<span class="sig-name descname"><span class="pre">GSM_Error</span>&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">GSM_SMSDService::ReadConfiguration</span> <span class="pre">(GSM_SMSDConfig</span> <span class="pre">*Config)</span></span></dt>
<dd><p>Reads configuration specific for this backend.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Config</strong> – Pointer to SMSD configuration data</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Error code.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="message-id">
<h3>Message ID<a class="headerlink" href="#message-id" title="Permalink to this heading"></a></h3>
<p>You might have noticed that message ID is often used in the API. The primary
reason for this is that it is usually easier for backend to handle message
just by it’s internal identification instead of handling message data from
<a class="reference internal" href="../c/message.html#c.GSM_MultiSMSMessage" title="GSM_MultiSMSMessage"><code class="xref c c-type docutils literal notranslate"><span class="pre">GSM_MultiSMSMessage</span></code></a>.</p>
<p>If the backend does not use any IDs internally, it really does not have to
provide them, with only exception of <code class="xref c c-func docutils literal notranslate"><span class="pre">GSM_SMSDService::FindOutboxSMS()</span></code>,
where ID is used for detection of repeated sending of same message.</p>
<p>The lifetime of ID for sent message:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="xref c c-func docutils literal notranslate"><span class="pre">GSM_SMSDService::CreateOutboxSMS()</span></code> or direct manipulation
with backend storage creates new ID</p></li>
<li><p><code class="xref c c-func docutils literal notranslate"><span class="pre">GSM_SMSDService::FindOutboxSMS()</span></code> returns ID of message to
process</p></li>
<li><p><code class="xref c c-func docutils literal notranslate"><span class="pre">GSM_SMSDService::AddSentSMSInfo()</span></code> and
<code class="xref c c-func docutils literal notranslate"><span class="pre">GSM_SMSDService::RefreshSendStatus()</span></code> are then notified using
this ID about sending of the message</p></li>
<li><p><code class="xref c c-func docutils literal notranslate"><span class="pre">GSM_SMSDService::MoveSMS()</span></code> then moves the message based on
ID to sent items</p></li>
</ul>
</div></blockquote>
<p>The lifetime of ID for incoming messages:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="xref c c-func docutils literal notranslate"><span class="pre">GSM_SMSDService::SaveInboxSMS()</span></code> generates the message</p></li>
<li><p><a class="reference internal" href="run.html#gammu-smsd-run"><span class="std std-ref">RunOnReceive Directive</span></a> uses this ID</p></li>
</ul>
</div></blockquote>
</section>
</section>
<section id="message-sending-workflow">
<h2>Message Sending Workflow<a class="headerlink" href="#message-sending-workflow" title="Permalink to this heading"></a></h2>
<div class="graphviz"><object data="../_images/graphviz-7f51ada41d60c0c9ecd4bb828cd70e03fff45aad.svg" type="image/svg+xml" class="graphviz">
<p class="warning">digraph smsdsending {
   &quot;new message&quot; [shape=box];
   &quot;message in storage&quot; [shape=box];
   &quot;message sent&quot; [shape=box];
   &quot;error sending message&quot; [shape=box];
   &quot;new message&quot; -&gt; &quot;manually created SMS&quot;;
   &quot;new message&quot; -&gt; &quot;CreateOutboxSMS&quot;;
   &quot;manually created SMS&quot; -&gt; &quot;message in storage&quot;;
   &quot;CreateOutboxSMS&quot; -&gt; &quot;message in storage&quot;
   &quot;message in storage&quot; -&gt; &quot;FindOutboxSMS&quot;;
   &quot;FindOutboxSMS&quot; -&gt; &quot;AddSentSMSInfo(ERROR)&quot; [label=&quot;Error&quot;, style=dotted];
   &quot;FindOutboxSMS&quot; -&gt; &quot;check duplicates&quot;;
   &quot;check duplicates&quot; -&gt; &quot;AddSentSMSInfo(ERROR)&quot; [label=&quot;Too many retries&quot;, style=dotted];
   &quot;check duplicates&quot; -&gt; &quot;GSM_SendSMS&quot;;
   &quot;GSM_SendSMS&quot; -&gt; &quot;RefreshSendStatus&quot;;
   &quot;GSM_SendSMS&quot; -&gt; &quot;AddSentSMSInfo(ERROR)&quot; [label=&quot;Error&quot;, style=dotted];
   &quot;RefreshSendStatus&quot; -&gt; &quot;RefreshSendStatus&quot; [label=&quot;Sending&quot;];
   &quot;RefreshSendStatus&quot; -&gt; &quot;AddSentSMSInfo(ERROR)&quot; [label=&quot;Timeout&quot;, style=dotted];
   &quot;RefreshSendStatus&quot; -&gt; &quot;AddSentSMSInfo(OK)&quot;;
   &quot;AddSentSMSInfo(OK)&quot; -&gt; &quot;MoveSMS(noforce, OK)&quot;;
   &quot;MoveSMS(noforce, OK)&quot; -&gt; &quot;MoveSMS(force, ERR)&quot; [label=&quot;Error&quot;, style=dotted];
   &quot;AddSentSMSInfo(OK)&quot; -&gt; &quot;MoveSMS(force, ERR)&quot; [label=&quot;Error&quot;, style=dotted];
   &quot;AddSentSMSInfo(ERROR)&quot; -&gt; &quot;MoveSMS(force, ERR)&quot;;
   &quot;MoveSMS(noforce, OK)&quot; -&gt; &quot;message sent&quot;;
   &quot;MoveSMS(force, ERR)&quot; -&gt; &quot;error sending message&quot;;
}</p></object></div>
</section>
<section id="message-receiving-workflow">
<h2>Message Receiving Workflow<a class="headerlink" href="#message-receiving-workflow" title="Permalink to this heading"></a></h2>
<div class="graphviz"><object data="../_images/graphviz-96ea05f688c063742e0d814333dc5ca7ea08dc64.svg" type="image/svg+xml" class="graphviz">
<p class="warning">digraph smsdreceiving {
    &quot;received message&quot; [shape=box];
    &quot;ignored message&quot; [shape=box];
    &quot;failed message&quot; [shape=box];
    &quot;waiting message&quot; [shape=box];
    &quot;processed message&quot; [shape=box];
    &quot;received message&quot; -&gt; &quot;GSM_GetNextSMS&quot;;
    &quot;GSM_GetNextSMS&quot; -&gt; &quot;SMSD_ValidMessage&quot;;
    &quot;SMSD_ValidMessage&quot; -&gt; &quot;GSM_LinkSMS&quot;;
    &quot;SMSD_ValidMessage&quot; -&gt; &quot;ignored message&quot; [label=&quot;Not valid&quot;, style=dotted];
    &quot;GSM_LinkSMS&quot; -&gt; &quot;SMSD_CheckMultipart&quot;;
    &quot;SMSD_CheckMultipart&quot; -&gt; &quot;SaveInboxSMS&quot;;
    &quot;SMSD_CheckMultipart&quot; -&gt; &quot;waiting message&quot; [label=&quot;Not all parts&quot;, style=dotted];
    &quot;SaveInboxSMS&quot; -&gt; &quot;SMSD_RunOnReceive&quot; [label=&quot;Locations are passed here&quot;];
    &quot;SaveInboxSMS&quot; -&gt; &quot;failed message&quot; [label=&quot;Error&quot;, style=dotted];
    &quot;SMSD_RunOnReceive&quot; -&gt; &quot;GSM_DeleteSMS&quot;;
    &quot;GSM_DeleteSMS&quot; -&gt; &quot;processed message&quot;
    &quot;GSM_DeleteSMS&quot; -&gt; &quot;failed message&quot; [label=&quot;Error&quot;, style=dotted];
}</p></object></div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="tables.html" class="btn btn-neutral float-left" title="SMSD Database Structure" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../utils/index.html" class="btn btn-neutral float-right" title="Miscellaneous utilities" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2009-2015, Michal Čihař &lt;michal@cihar.com&gt;.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>