.\" Man page generated from reStructuredText
.\" by the Docutils 0.22.4 manpage writer.
.
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.TH "GAMMU-SMSD-PGSQL" "7" "Feb 09, 2026" "1.43.2" "Gammu"
.SH NAME
gammu-smsd-pgsql \- gammu-smsd(1) backend using PostgreSQL database server as a message storage
.SH DESCRIPTION
.sp
PGSQL backend stores all data in a PostgreSQL \%<https://\:www\:.postgresql\:.org/> database server, which
parameters are defined by configuration (see SMSD Configuration File \%<#\:gammu-smsdrc> for description of
configuration options).
.sp
For tables description see SMSD Database Structure \%<#\:gammu-smsd-tables>\&.
.sp
This backend is based on SQL Service \%<#\:gammu-smsd-sql>\&.
.SH CONFIGURATION
.sp
Before running gammu\-smsd \%<#\:gammu-smsd> you need to create necessary tables in the
database, which is described below.
.sp
The configuration file then can look like:
.INDENT 0.0
.INDENT 3.5
.sp
.EX
[smsd]
service = sql
driver = native_pgsql
host = localhost
.EE
.UNINDENT
.UNINDENT
.sp
\fBSee also:\fP
.INDENT 0.0
.INDENT 3.5
SMSD Configuration File \%<#\:gammu-smsdrc>
.UNINDENT
.UNINDENT
.SH CREATING TABLES FOR POSTGRESQL
.sp
SQL script for creating tables in PostgreSQL database:
.INDENT 0.0
.INDENT 3.5
.sp
.EX
\-\-
\-\- Database: \(dqsmsd\(dq
\-\-
\-\- CREATE USER \(dqsmsd\(dq WITH NOCREATEDB NOCREATEUSER;
\-\- CREATE DATABASE \(dqsmsd\(dq WITH OWNER = \(dqsmsd\(dq ENCODING = \(aqUTF8\(aq;
\-\- \econnect \(dqsmsd\(dq \(dqsmsd\(dq
\-\- COMMENT ON DATABASE \(dqsmsd\(dq IS \(aqGammu SMSD Database\(aq;

\-\- \-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-

\-\-
\-\- Function declaration for updating timestamps
\-\-
CREATE EXTENSION IF NOT EXISTS plpgsql;
CREATE OR REPLACE FUNCTION update_timestamp() RETURNS trigger AS $update_timestamp$
  BEGIN
    NEW.\(dqUpdatedInDB\(dq := LOCALTIMESTAMP(0);
    RETURN NEW;
  END;
$update_timestamp$ LANGUAGE plpgsql;

\-\- \-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-

\-\-
\-\- Sequence declarations for tables\(aq primary keys
\-\-

\-\-CREATE SEQUENCE inbox_ID_seq;

\-\-CREATE SEQUENCE outbox_ID_seq;

\-\-CREATE SEQUENCE outbox_multipart_ID_seq;

\-\-CREATE SEQUENCE sentitems_ID_seq;

\-\- \-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-

\-\-
\-\- Index declarations for tables\(aq primary keys
\-\-

\-\-CREATE UNIQUE INDEX inbox_pkey ON inbox USING btree (\(dqID\(dq);

\-\-CREATE UNIQUE INDEX outbox_pkey ON outbox USING btree (\(dqID\(dq);

\-\-CREATE UNIQUE INDEX outbox_multipart_pkey ON outbox_multipart USING btree (\(dqID\(dq);

\-\-CREATE UNIQUE INDEX sentitems_pkey ON sentitems USING btree (\(dqID\(dq);

\-\- \-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-

\-\-
\-\- Table structure for table \(dqgammu\(dq
\-\-

CREATE TABLE gammu (
  \(dqVersion\(dq smallint NOT NULL DEFAULT 0 PRIMARY KEY
);

\-\-
\-\- Dumping data for table \(dqgammu\(dq
\-\-

INSERT INTO gammu (\(dqVersion\(dq) VALUES (17);

\-\- \-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-

\-\-
\-\- Table structure for table \(dqinbox\(dq
\-\-

CREATE TABLE inbox (
  \(dqUpdatedInDB\(dq timestamp(0) WITHOUT time zone NOT NULL DEFAULT LOCALTIMESTAMP(0),
  \(dqReceivingDateTime\(dq timestamp(0) WITHOUT time zone NOT NULL DEFAULT LOCALTIMESTAMP(0),
  \(dqText\(dq text NOT NULL,
  \(dqSenderNumber\(dq varchar(20) NOT NULL DEFAULT \(aq\(aq,
  \(dqCoding\(dq varchar(255) NOT NULL DEFAULT \(aqDefault_No_Compression\(aq,
  \(dqUDH\(dq text NOT NULL,
  \(dqSMSCNumber\(dq varchar(20) NOT NULL DEFAULT \(aq\(aq,
  \(dqClass\(dq integer NOT NULL DEFAULT \-1,
  \(dqTextDecoded\(dq text NOT NULL DEFAULT \(aq\(aq,
  \(dqID\(dq serial PRIMARY KEY,
  \(dqRecipientID\(dq text NOT NULL,
  \(dqProcessed\(dq boolean NOT NULL DEFAULT FALSE,
  \(dqStatus\(dq integer NOT NULL DEFAULT \-1,
  CHECK (\(dqCoding\(dq IN
  (\(aqDefault_No_Compression\(aq,\(aqUnicode_No_Compression\(aq,\(aq8bit\(aq,\(aqDefault_Compression\(aq,\(aqUnicode_Compression\(aq))
);

\-\-
\-\- Dumping data for table \(dqinbox\(dq
\-\-

\-\- \-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-

\-\-
\-\- Create trigger for table \(dqinbox\(dq
\-\-

CREATE TRIGGER update_timestamp BEFORE UPDATE ON inbox FOR EACH ROW EXECUTE PROCEDURE update_timestamp();

\-\- \-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-

\-\-
\-\- Table structure for table \(dqoutbox\(dq
\-\-

CREATE TABLE outbox (
  \(dqUpdatedInDB\(dq timestamp(0) WITHOUT time zone NOT NULL DEFAULT LOCALTIMESTAMP(0),
  \(dqInsertIntoDB\(dq timestamp(0) WITHOUT time zone NOT NULL DEFAULT LOCALTIMESTAMP(0),
  \(dqSendingDateTime\(dq timestamp NOT NULL DEFAULT LOCALTIMESTAMP(0),
  \(dqSendBefore\(dq time NOT NULL DEFAULT \(aq23:59:59\(aq,
  \(dqSendAfter\(dq time NOT NULL DEFAULT \(aq00:00:00\(aq,
  \(dqText\(dq text,
  \(dqDestinationNumber\(dq varchar(20) NOT NULL DEFAULT \(aq\(aq,
  \(dqCoding\(dq varchar(255) NOT NULL DEFAULT \(aqDefault_No_Compression\(aq,
  \(dqUDH\(dq text,
  \(dqClass\(dq integer DEFAULT \-1,
  \(dqTextDecoded\(dq text NOT NULL DEFAULT \(aq\(aq,
  \(dqID\(dq serial PRIMARY KEY,
  \(dqMultiPart\(dq boolean NOT NULL DEFAULT FALSE,
  \(dqRelativeValidity\(dq integer DEFAULT \-1,
  \(dqSenderID\(dq varchar(255),
  \(dqSendingTimeOut\(dq timestamp(0) WITHOUT time zone NOT NULL DEFAULT LOCALTIMESTAMP(0),
  \(dqDeliveryReport\(dq varchar(10) DEFAULT \(aqdefault\(aq,
  \(dqCreatorID\(dq text NOT NULL,
  \(dqRetries\(dq integer DEFAULT 0,
  \(dqPriority\(dq integer DEFAULT 0,
  \(dqStatus\(dq varchar(255) NOT NULL DEFAULT \(aqReserved\(aq,
  \(dqStatusCode\(dq integer NOT NULL DEFAULT \-1,
  CHECK (\(dqCoding\(dq IN
  (\(aqDefault_No_Compression\(aq,\(aqUnicode_No_Compression\(aq,\(aq8bit\(aq,\(aqDefault_Compression\(aq,\(aqUnicode_Compression\(aq)),
  CHECK (\(dqDeliveryReport\(dq IN (\(aqdefault\(aq,\(aqyes\(aq,\(aqno\(aq)),
  CHECK (\(dqStatus\(dq IN
  (\(aqSendingOK\(aq,\(aqSendingOKNoReport\(aq,\(aqSendingError\(aq,\(aqDeliveryOK\(aq,\(aqDeliveryFailed\(aq,\(aqDeliveryPending\(aq,
  \(aqDeliveryUnknown\(aq,\(aqError\(aq,\(aqReserved\(aq))
);

CREATE INDEX outbox_date ON outbox(\(dqSendingDateTime\(dq, \(dqSendingTimeOut\(dq);
CREATE INDEX outbox_sender ON outbox(\(dqSenderID\(dq);

\-\-
\-\- Dumping data for table \(dqoutbox\(dq
\-\-

\-\- \-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-

\-\-
\-\- Create trigger for table \(dqoutbox\(dq
\-\-

CREATE TRIGGER update_timestamp BEFORE UPDATE ON outbox FOR EACH ROW EXECUTE PROCEDURE update_timestamp();

\-\- \-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-

\-\-
\-\- Table structure for table \(dqoutbox_multipart\(dq
\-\-

CREATE TABLE outbox_multipart (
  \(dqText\(dq text,
  \(dqCoding\(dq varchar(255) NOT NULL DEFAULT \(aqDefault_No_Compression\(aq,
  \(dqUDH\(dq text,
  \(dqClass\(dq integer DEFAULT \-1,
  \(dqTextDecoded\(dq text DEFAULT NULL,
  \(dqID\(dq serial,
  \(dqSequencePosition\(dq integer NOT NULL DEFAULT 1,
  \(dqStatus\(dq varchar(255) NOT NULL DEFAULT \(aqReserved\(aq,
  \(dqStatusCode\(dq integer NOT NULL DEFAULT \-1,
  PRIMARY KEY (\(dqID\(dq, \(dqSequencePosition\(dq),
  CHECK (\(dqCoding\(dq IN
  (\(aqDefault_No_Compression\(aq,\(aqUnicode_No_Compression\(aq,\(aq8bit\(aq,\(aqDefault_Compression\(aq,\(aqUnicode_Compression\(aq)),
  CHECK (\(dqStatus\(dq IN
  (\(aqSendingOK\(aq,\(aqSendingOKNoReport\(aq,\(aqSendingError\(aq,\(aqDeliveryOK\(aq,\(aqDeliveryFailed\(aq,\(aqDeliveryPending\(aq,
  \(aqDeliveryUnknown\(aq,\(aqError\(aq,\(aqReserved\(aq))
);

\-\-
\-\- Dumping data for table \(dqoutbox_multipart\(dq
\-\-


\-\- \-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-

\-\-
\-\- Table structure for table \(dqphones\(dq
\-\-

CREATE TABLE phones (
  \(dqID\(dq text NOT NULL,
  \(dqUpdatedInDB\(dq timestamp(0) WITHOUT time zone NOT NULL DEFAULT LOCALTIMESTAMP(0),
  \(dqInsertIntoDB\(dq timestamp(0) WITHOUT time zone NOT NULL DEFAULT LOCALTIMESTAMP(0),
  \(dqTimeOut\(dq timestamp(0) WITHOUT time zone NOT NULL DEFAULT LOCALTIMESTAMP(0),
  \(dqSend\(dq boolean NOT NULL DEFAULT \(aqno\(aq,
  \(dqReceive\(dq boolean NOT NULL DEFAULT \(aqno\(aq,
  \(dqIMEI\(dq varchar(35) PRIMARY KEY NOT NULL,
  \(dqIMSI\(dq varchar(35) NOT NULL,
  \(dqNetCode\(dq varchar(10) DEFAULT \(aqERROR\(aq,
  \(dqNetName\(dq varchar(35) DEFAULT \(aqERROR\(aq,
  \(dqClient\(dq text NOT NULL,
  \(dqBattery\(dq integer NOT NULL DEFAULT \-1,
  \(dqSignal\(dq integer NOT NULL DEFAULT \-1,
  \(dqSent\(dq integer NOT NULL DEFAULT 0,
  \(dqReceived\(dq integer NOT NULL DEFAULT 0
);

\-\-
\-\- Dumping data for table \(dqphones\(dq
\-\-

\-\- \-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-

\-\-
\-\- Create trigger for table \(dqphones\(dq
\-\-

CREATE TRIGGER update_timestamp BEFORE UPDATE ON phones FOR EACH ROW EXECUTE PROCEDURE update_timestamp();

\-\- \-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-

\-\-
\-\- Table structure for table \(dqsentitems\(dq
\-\-

CREATE TABLE sentitems (
  \(dqUpdatedInDB\(dq timestamp(0) WITHOUT time zone NOT NULL DEFAULT LOCALTIMESTAMP(0),
  \(dqInsertIntoDB\(dq timestamp(0) WITHOUT time zone NOT NULL DEFAULT LOCALTIMESTAMP(0),
  \(dqSendingDateTime\(dq timestamp(0) WITHOUT time zone NOT NULL DEFAULT LOCALTIMESTAMP(0),
  \(dqDeliveryDateTime\(dq timestamp(0) WITHOUT time zone NULL,
  \(dqText\(dq text NOT NULL,
  \(dqDestinationNumber\(dq varchar(20) NOT NULL DEFAULT \(aq\(aq,
  \(dqCoding\(dq varchar(255) NOT NULL DEFAULT \(aqDefault_No_Compression\(aq,
  \(dqUDH\(dq text NOT NULL,
  \(dqSMSCNumber\(dq varchar(20) NOT NULL DEFAULT \(aq\(aq,
  \(dqClass\(dq integer NOT NULL DEFAULT \-1,
  \(dqTextDecoded\(dq text NOT NULL DEFAULT \(aq\(aq,
  \(dqID\(dq serial,
  \(dqSenderID\(dq varchar(255) NOT NULL,
  \(dqSequencePosition\(dq integer NOT NULL DEFAULT 1,
  \(dqStatus\(dq varchar(255) NOT NULL DEFAULT \(aqSendingOK\(aq,
  \(dqStatusError\(dq integer NOT NULL DEFAULT \-1,
  \(dqTPMR\(dq integer NOT NULL DEFAULT \-1,
  \(dqRelativeValidity\(dq integer NOT NULL DEFAULT \-1,
  \(dqCreatorID\(dq text NOT NULL,
  \(dqStatusCode\(dq integer NOT NULL DEFAULT \-1,
  CHECK (\(dqStatus\(dq IN
  (\(aqSendingOK\(aq,\(aqSendingOKNoReport\(aq,\(aqSendingError\(aq,\(aqDeliveryOK\(aq,\(aqDeliveryFailed\(aq,\(aqDeliveryPending\(aq,
  \(aqDeliveryUnknown\(aq,\(aqError\(aq)),
  CHECK (\(dqCoding\(dq IN
  (\(aqDefault_No_Compression\(aq,\(aqUnicode_No_Compression\(aq,\(aq8bit\(aq,\(aqDefault_Compression\(aq,\(aqUnicode_Compression\(aq)),
  PRIMARY KEY (\(dqID\(dq, \(dqSequencePosition\(dq)
);

CREATE INDEX sentitems_date ON sentitems(\(dqDeliveryDateTime\(dq);
CREATE INDEX sentitems_tpmr ON sentitems(\(dqTPMR\(dq);
CREATE INDEX sentitems_dest ON sentitems(\(dqDestinationNumber\(dq);
CREATE INDEX sentitems_sender ON sentitems(\(dqSenderID\(dq);

\-\-
\-\- Dumping data for table \(dqsentitems\(dq
\-\-

\-\- \-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-

\-\-
\-\- Create trigger for table \(dqsentitems\(dq
\-\-

CREATE TRIGGER update_timestamp BEFORE UPDATE ON sentitems FOR EACH ROW EXECUTE PROCEDURE update_timestamp();

.EE
.UNINDENT
.UNINDENT
.sp
\fBNote:\fP
.INDENT 0.0
.INDENT 3.5
You can find the script in \fBdocs/sql/pgsql.sql\fP as well.
.UNINDENT
.UNINDENT
.SH UPGRADING TABLES
.sp
The easiest way to upgrade database structure is to backup old one and start
with creating new one based on example above.
.sp
For upgrading existing database, you can use changes described in
History of database structure \%<#\:smsd-tables-history> and then manually update \fBVersion\fP field in
\fBgammu\fP table.
.SH Author
Michal Čihař <michal@cihar.com>
.SH Copyright
2009-2015, Michal Čihař <michal@cihar.com>
.\" End of generated man page.
